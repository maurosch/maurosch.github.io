{{ $seed := "foo" }}
{{ $randomID := delimit (shuffle (split (md5 $seed) "" )) "" }}

<style>#{{ $randomID }} { 
    height: 300px; 
    margin-right: 24px;
    margin-left: 24px;
}</style>

<div class="figure" style="text-align:center; width: 100%;">
    <p>
        <div id="{{ $randomID }}"></div>
    </p>
    <p class="caption">{{.Get "title"}}</p>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
<script>
(function() {
    var map = L.map('{{ $randomID }}').setView([51.505, -0.09], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    fetch("{{.Get "route"}}")
        .then(response => response.json())
        .then(data => {
            var polyline = L.polyline(data, {color: 'red'}).addTo(map);
            map.fitBounds(polyline.getBounds());
    });
})();
</script>